#pipelines:
#  - name: roblox_pipeline
#    enabled: true
#    class: DataExtractorPipeline       # which pipeline class to use
#    type: sample               # full or sample
#    sample_size: 100
#    output_csv: "roblox_data.csv"

pipelines:
  - name: roblox_extraction
    type: pipelines.data_extractor_pipeline.DataExtractorPipeline
    extractor_type: roblox
    params:
      output_csv: "output/roblox_data.csv"
      extractor_params:
        sample_size: 1000

  - name: filter_features
    type: pipelines.filter_pipeline.FilterPipeline
    filter_features:
      - name: drop_columns
        params:
          columns_to_drop:
            [ 'Id', 'Date', 'Active_Users', 'Favorites', 'Total_Visits',
              'Date_Created', 'Last_Updated', 'Server_Size', 'Title',
              'Creator', 'gameID', 'Category', 'URL' ]


  - name: split_data
    type: pipelines.data_splitter_pipeline.DataSplitterPipeline
    params:
      target_column: "Genre"
      test_size: 0.2
      random_state: 42

  - name: encode_target
    type: pipelines.target_feature_pipeline.TargetFeaturePipeline
    params:
      target_column: "Genre"


#  - name: naive_bayes
#    type: pipelines.experiment_pipeline.ExperimentPipeline
#    params:
#      experiment_type: "classification"
#      model_name: "naive_bayes"
#      evaluator_name: "classification"
#      metrics: ["accuracy", "f1", "precision", "recall"]
#      mlflow_experiment: "Naive Bayes Experiments"
#      experiments:
#        - params: {}  # default params

  - name: naive_bayes
    type: pipelines.experiment_pipeline.ExperimentPipeline
    params:
      experiment_type: "classification"
      model_name: "naive_bayes"
      evaluator_name: "classification"
      metrics: ["accuracy", "f1_score", "precision", "recall"]
      mlflow_experiment: "Naive Bayes Experiments"

      experiments:
        # ------------------------------------------------------------
        # 1. Naive Bayes + TF-IDF
        # ------------------------------------------------------------
        - run_name: "Naive Bayes TF-IDF"
          params:
            description: "Naive Bayes experiments with TF-IDF vectorization technique on Roblox game descriptions."
            cv_enabled: true
            cv_stratified: true
            cv_folds: 5
            cv_shuffle: true
            cv_random_state: 43
            vectorizer:
              vectorizer_name: "tfidf"
              vectorizer_field: "Description"
              vectorizer_params:
                max_features: 5000
                ngram_range: [1, 2]
                stop_words: "english"

#        # ------------------------------------------------------------
#        # 2. Naive Bayes + Word2Vec
#        # ------------------------------------------------------------
#        - run_name: "nb_word2vec"
#          params:
#            vectorizer:
#              vectorizer_name: "word2vec"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                vector_size: 300
#                window: 5
#                min_count: 2

#        # ------------------------------------------------------------
#        # 3. Naive Bayes + BERT embeddings
#        # ------------------------------------------------------------
#        - run_name: "nb_bert"
#          params:
#            vectorizer:
#              vectorizer_name: "bert"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                model_name: "sentence-transformers/all-mpnet-base-v2"

#        # ------------------------------------------------------------
#        # 4. Default experiment (no vectorizer)
#        # ------------------------------------------------------------
#        - run_name: "nb_default"
#          params: {}
