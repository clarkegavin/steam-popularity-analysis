#config/pipelines.yaml

pipelines:
  - name: roblox_extraction
    type: pipelines.data_extractor_pipeline.DataExtractorPipeline
    extractor_type: roblox
    params:
      output_csv: "output/roblox_data.csv"
#      extractor_params:
#        sample_size: 1000


  # anything that changes the shape of teh data will need to be in this cleanup block
  - name: data_cleanup
    type: pipelines.data_cleanup_pipeline.DataCleanupPipeline
    params:
      # cleanup_steps is a list of preprocessors (built via PreprocessorFactory)
      cleanup_steps:
        - name: remove_duplicates
          params:
            field: "gameID"
            keep: "first"
            case_sensitive: false
            dropna: true
        - name: filter_rows
          params:
            field: "Genre"
            values: [ "All" ]
            operator: "equals"
            case_sensitive: false
        - name: filter_rows
          params:
            field: "Description"
            values: [null, ""]
            operator: "in"
            case_sensitive: false
        - name: merge_features
          params:
            columns: ["Description", "Title"]
            merge_to: "Description"
#        - name: remove_urls
#          params:
#            field: "Description"
#            pattern: 'https?://\S+|www\.\S+'
#        - name: remove_repeated_characters
#          params:
#            field: "Description"
#            pattern: "(.)\\1{2,}"
#        - name: remove_punctuation_noise
#          params:
#            field: "Description"
#            pattern: '([!?.,])\1+'
#        - name: remove_whitespace
#          params:
#            field: "Description"
#        - name: stopword_remover
#          params:
#            language: "english"
#            lower: true
#            field: "Description"



  - name: filter_features
    type: pipelines.filter_pipeline.FilterPipeline
    filter_features:
      - name: drop_columns
        params:
          columns_to_drop:
            [ 'Id', 'Date', 'Active_Users', 'Favorites', 'Total_Visits',
              'Date_Created', 'Last_Updated', 'Server_Size', 'Title',
              'Creator', 'gameID', 'Category', 'URL' ]

#  - name: eda
#    type: pipelines.eda_pipeline.EDAPipeline
#    params:
#      save_path: "output/eda"
#      steps:
#        - name: class_balance
#        - name: wordcloud_global
#        - name: wordcloud_by_class
#        - name: describe_info
#        - name: duplicate_check
#    dataset:
#      target: "Genre"
#      text_field: "Description"

#------------------------------------------------------------
# Clustering
#------------------------------------------------------------
#  - name: clustering
#    type: pipelines.clustering_pipeline.ClusteringPipeline
#    params:
#      text_field: "Description"
#      genre_field: "Genre"
#      filter_genre: "All"
#      vectorizer:
#        vectorizer_name: "tfidf"
#        vectorizer_field: "Description"
#        vectorizer_params:
#          max_features: 5000
#          ngram_range: [ 1, 2 ]
#          stop_words: "english"
#      clusterer:
#         name: "hdbscan"
#         params:
#            min_cluster_size: 30
#            min_samples: 10
#            #metric: "cosine" # memory issues with cosine on large datasets
#            metric: "euclidean"
#      reducer:
#         name: "umap"
#         params:
#            n_components: 50
#      visualisations:
#         name: cluster_plot
#         params:
#            output_dir: "output/clustering"
#            figsize: [10, 8]
#            xlabel: "UMAP Dimension 1"
#            ylabel: "UMAP Dimension 2"
#            zlabel: "UMAP Dimension 3"
#            title: "HDBSCAN Clustering of Roblox Game Descriptions"
#            xticks_rotation: 45
#            label_min_cluster_size: 250
#            dimensions: 3




#  - name: preprocess_text
#    type: pipelines.preprocessing_pipeline.PreprocessingPipeline
#    params:
#      text_field: "Description"
#      #      preprocessors: []
#      preprocessors:
#        - name: mask_genre_words
#          params:
#            description_field: "Description"
#            genre_words: [ "RPG", "Comedy", "Adventure", "Horror", "Sci-Fi", "Fighting", "Military", "Naval", "Town", "City", "Town and City", "Building", "Build", "Builds", "Builder", "Builders", "Fight", "FPS" ]
#            mask_token: "<MASKED>"
#            case_sensitive: false


  - name: split_data
    type: pipelines.data_splitter_pipeline.DataSplitterPipeline
    params:
      target_column: "Genre"
      test_size: 0.2
      random_state: 42


  - name: encode_target
    type: pipelines.target_feature_pipeline.TargetFeaturePipeline
    params:
      target_column: "Genre"
#
##
  - name: naive_bayes
    type: pipelines.experiment_pipeline.ExperimentPipeline
    params:
      experiment_type: "classification"
      model_name: "naive_bayes"
      evaluator_name: "classification"
      metrics: [ "accuracy", "f1_score", "precision", "recall" ]
      mlflow_experiment: "Naive Bayes Experiments"
      experiments:
#
##         ------------------------------------------------------------
##         1a. Baseline: no preprocessing
##         ------------------------------------------------------------
#        - run_name: "001000. NB + TF-IDF baseline word n-grams"
#          text_field:   "Description"
#          params:
#            description: "001000. NB + TF-IDF baseline word n-grams"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 5000
#                ngram_range: [ 1, 2 ]
#                stop_words: "english"
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
##         ------------------------------------------------------------
##         1a. Baseline: no preprocessing
##         ------------------------------------------------------------
#        - run_name: "001500. NB + TF-IDF baseline character n-grams"
#          text_field:   "Description"
#          params:
#            description: "001500. NB + TF-IDF baseline character n-grams"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6]
#                analyzer: 'char_wb'
#                stop_words: "english"
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
## --------------------------------------------------------------
#        # CUMULATIVE PREPROCESSING STEPS
## ------------------------------------------------------------
#
#        # ------------------------------------------------------------
#        # 1b. Add lowercase
#        # ------------------------------------------------------------
#        - run_name: "002000. NB + lowercase"
#          text_field: "Description"
#          preprocessing:
#            - name: lowercase
#          params:
#            description: "002000. NB + lowercase"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6]
#                analyzer: 'char_wb'
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#        # ------------------------------------------------------------
#        # 1c. Add remove_repeated_characters
#        # ------------------------------------------------------------
#        - run_name: "003000. NB + repeated char removal"
#          text_field: "Description"
#          preprocessing:
#            - name: lowercase
#            - name: remove_repeated_characters
#              params:
#                field: "Description"
#                pattern: "(.)\\1{2,}"
#          params:
#            description: "003000. NB + repeated char removal"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#        # ------------------------------------------------------------
#        # 1d. Add remove_urls
#        # ------------------------------------------------------------
#        - run_name: "004000. NB + remove URLs"
#          text_field: "Description"
#          preprocessing:
#            - name: lowercase
#            - name: remove_repeated_characters
#              params:
#                field: "Description"
#                pattern: "(.)\\1{2,}"
#            - name: remove_urls
#              params:
#                field: "Description"
#                pattern: 'https?://\S+|www\.\S+'
#          params:
#            description: "004000. NB + remove URLs"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#        # ------------------------------------------------------------
#        # 1e. Add remove_whitespace
#        # ------------------------------------------------------------
#        - run_name: "005000. NB + remove whitespace"
#          text_field: "Description"
#          preprocessing:
#            - name: lowercase
#            - name: remove_repeated_characters
#              params:
#                field: "Description"
#                pattern: "(.)\\1{2,}"
#            - name: remove_urls
#              params:
#                field: "Description"
#                pattern: 'https?://\S+|www\.\S+'
#            - name: remove_whitespace
#              params:
#                field: "Description"
#                pattern: '\\s+'
#          params:
#            description: "005000. NB + remove whitespace"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#        # ------------------------------------------------------------
#        # 1f. Add remove_punctuation_noise
#        # ------------------------------------------------------------
#        - run_name: "006000. NB + remove punctuation noise"
#          text_field: "Description"
#          preprocessing:
#            - name: lowercase
#            - name: remove_repeated_characters
#              params:
#                field: "Description"
#                pattern: "(.)\\1{2,}"
#            - name: remove_urls
#              params:
#                field: "Description"
#                pattern: 'https?://\S+|www\.\S+'
#            - name: remove_whitespace
#              params:
#                field: "Description"
#                pattern: '\\s+'
#            - name: remove_punctuation_noise
#              params:
#                field: "Description"
#                pattern: '([!?.,])\\1+'
#          params:
#            description: "006000. NB + remove punctuation noise"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#        # ------------------------------------------------------------
#        # 1g. Add stopword_remover
#        # ------------------------------------------------------------
#        - run_name: "007000. NB + stopword remover"
#          text_field: "Description"
#          preprocessing:
#            - name: lowercase
#            - name: remove_repeated_characters
#              params:
#                field: "Description"
#                pattern: "(.)\\1{2,}"
#            - name: remove_urls
#              params:
#                field: "Description"
#                pattern: 'https?://\S+|www\.\S+'
#            - name: remove_whitespace
#              params:
#                field: "Description"
#                pattern: '\\s+'
#            - name: remove_punctuation_noise
#              params:
#                field: "Description"
#                pattern: '([!?.,])\\1+'
#            - name: stopword_remover
#              params:
#                language: "english"
#                lower: true
#                field: "Description"
#          params:
#            description: "007000. NB + stopword remover"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#        - run_name: "008000. NB +  emoji remover"
#          text_field: "Description"
#          preprocessing:
#            - name: lowercase
#            - name: remove_repeated_characters
#              params:
#                field: "Description"
#                pattern: "(.)\\1{2,}"
#            - name: remove_urls
#              params:
#                field: "Description"
#                pattern: 'https?://\S+|www\.\S+'
#            - name: remove_whitespace
#              params:
#                field: "Description"
#                pattern: '\\s+'
#            - name: remove_punctuation_noise
#              params:
#                field: "Description"
#                pattern: '([!?.,])\\1+'
#            - name: stopword_remover
#              params:
#                field: "Description"
#                language: "english"
#                lower: true
#            - name: emoji_remover
#              params:
#                use_emoji_lib: true
#          params:
#            description: "008000. NB +  emoji remover"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#        # ------------------------------------------------------------
#        # 1h. Add stemmer (porter and snowball variants)
#        # ------------------------------------------------------------
#        - run_name: "009000. NB + stemmer (porter)"
#          text_field: "Description"
#          preprocessing:
#            - name: lowercase
#            - name: remove_repeated_characters
#              params:
#                field: "Description"
#                pattern: "(.)\\1{2,}"
#            - name: remove_urls
#              params:
#                field: "Description"
#                pattern: 'https?://\S+|www\.\S+'
#            - name: remove_whitespace
#              params:
#                field: "Description"
#                pattern: '\\s+'
#            - name: remove_punctuation_noise
#              params:
#                field: "Description"
#                pattern: '([!?.,])\\1+'
#            - name: stopword_remover
#              params:
#                language: "english"
#                lower: true
#                field: "Description"
#            - name: emoji_remover
#              params:
#                use_emoji_lib: true
#            - name: stemmer
#              params:
#                language: "english"
#                algorithm: "porter"
#          params:
#            description: "009000. NB + stemmer (porter)"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#        - run_name: "010000. NB + stemmer (snowball)"
#          text_field: "Description"
#          preprocessing:
#            - name: lowercase
#            - name: remove_repeated_characters
#              params:
#                field: "Description"
#                pattern: "(.)\\1{2,}"
#            - name: remove_urls
#              params:
#                field: "Description"
#                pattern: 'https?://\S+|www\.\S+'
#            - name: remove_whitespace
#              params:
#                field: "Description"
#                pattern: '\\s+'
#            - name: remove_punctuation_noise
#              params:
#                field: "Description"
#                pattern: '([!?.,])\\1+'
#            - name: stopword_remover
#              params:
#                language: "english"
#                lower: true
#                field: "Description"
#            - name: emoji_remover
#              params:
#                use_emoji_lib: true
#            - name: stemmer
#              params:
#                language: "english"
#                algorithm: "snowball"
#          params:
#            description: "010000. NB + stemmer (snowball)"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#
        - run_name: "011000. NB +  lemmatization"
          text_field: "Description"
          preprocessing:
            - name: lowercase
            - name: remove_repeated_characters
              params:
                field: "Description"
                pattern: "(.)\\1{2,}"
            - name: remove_urls
              params:
                field: "Description"
                pattern: 'https?://\S+|www\.\S+'
            - name: remove_whitespace
              params:
                field: "Description"
                pattern: '\\s+'
            - name: remove_punctuation_noise
              params:
                field: "Description"
                pattern: '([!?.,])\\1+'
            - name: stopword_remover
              params:
                field: "Description"
                language: "english"
                lower: true
            - name: emoji_remover
              params:
                use_emoji_lib: true
            - name: lemmatizer
              params:
                model: "en_core_web_sm"
          params:
            description: "011000. NB +  lemmatization"
            save_path: "output/naive_bayes_results"
            cv_enabled: true
            cv_stratified: true
            cv_folds: 5
            cv_shuffle: true
            cv_random_state: 43
            vectorizer:
              vectorizer_name: "tfidf"
              vectorizer_field: "Description"
              vectorizer_params:
                max_features: 10000
                ngram_range: [ 4, 6 ]
                analyzer: 'char_wb'
            visualisations:
              - name: confusion_matrix
                kwargs:
                  figsize: [ 8, 6 ]
                  cmap: "Blues"
##
#        - run_name: "012000. NB +  sampling (SMOTE)"
#          text_field: "Description"
#          preprocessing:
#            - name: lowercase
#            - name: remove_repeated_characters
#              params:
#                field: "Description"
#                pattern: "(.)\\1{2,}"
#            - name: remove_urls
#              params:
#                field: "Description"
#                pattern: 'https?://\S+|www\.\S+'
#            - name: remove_whitespace
#              params:
#                field: "Description"
#                pattern: '\\s+'
#            - name: remove_punctuation_noise
#              params:
#                field: "Description"
#                pattern: '([!?.,])\\1+'
#            - name: stopword_remover
#              params:
#                field: "Description"
#                language: "english"
#                lower: true
#            - name: emoji_remover
#              params:
#                use_emoji_lib: true
#            - name: lemmatizer
#              params:
#                model: "en_core_web_sm"
#          params:
#            description: "012000. NB +  sampling (SMOTE)"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            sampler:
#              name: "composite"
#              params:
#                steps:
#                  - name: "smote"
#                    params:
#                      random_state: 42
#                      sampling_strategy: "auto"
#                      k_neighbors: 5
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#
#        - run_name: "013000. NB +  sampling (under)"
#          text_field: "Description"
#          preprocessing:
#            - name: lowercase
#            - name: remove_repeated_characters
#              params:
#                field: "Description"
#                pattern: "(.)\\1{2,}"
#            - name: remove_urls
#              params:
#                field: "Description"
#                pattern: 'https?://\S+|www\.\S+'
#            - name: remove_whitespace
#              params:
#                field: "Description"
#                pattern: '\\s+'
#            - name: remove_punctuation_noise
#              params:
#                field: "Description"
#                pattern: '([!?.,])\\1+'
#            - name: stopword_remover
#              params:
#                field: "Description"
#                language: "english"
#                lower: true
#            - name: emoji_remover
#              params:
#                use_emoji_lib: true
#            - name: lemmatizer
#              params:
#                model: "en_core_web_sm"
#          params:
#            description: "012000. NB +  sampling (under)"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            sampler:
#              name: "composite"
#              params:
#                steps:
#                  - name: "under_sampler"
#                    params:
#                      random_state: 42
#                      sampling_strategy: "auto"
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#
#        - run_name: "014000. NB +  sampling (over)"
#          text_field: "Description"
#          preprocessing:
#            - name: lowercase
#            - name: remove_repeated_characters
#              params:
#                field: "Description"
#                pattern: "(.)\\1{2,}"
#            - name: remove_urls
#              params:
#                field: "Description"
#                pattern: 'https?://\S+|www\.\S+'
#            - name: remove_whitespace
#              params:
#                field: "Description"
#                pattern: '\\s+'
#            - name: remove_punctuation_noise
#              params:
#                field: "Description"
#                pattern: '([!?.,])\\1+'
#            - name: stopword_remover
#              params:
#                field: "Description"
#                language: "english"
#                lower: true
#            - name: emoji_remover
#              params:
#                use_emoji_lib: true
#            - name: lemmatizer
#              params:
#                model: "en_core_web_sm"
#          params:
#            description: "014000. NB +  sampling (over)"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            sampler:
#              name: "composite"
#              params:
#                steps:
#                  - name: "over_sampler"
#                    params:
#                      random_state: 42
#                      sampling_strategy: "auto"
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#
##        ------------------------------------------------------------
#        # INDIVIDUAL PREPROCESSING STEPS ONLY
##        ------------------------------------------------------------
#
#        - run_name: "014500. NB +  lowercase only"
#          text_field: "Description"
#          preprocessing:
#            - name: lowercase
#          params:
#            description: "014000. NB +  lowercase only"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#
#        - run_name: "015000. NB +  remove repeated characters only"
#          text_field: "Description"
#          preprocessing:
#            - name: remove_repeated_characters
#              params:
#                field: "Description"
#                pattern: "(.)\\1{2,}"
#          params:
#            description: "015000. NB +  remove repeated characters only"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#
#        - run_name: "016000. NB +  remove urls only"
#          text_field: "Description"
#          preprocessing:
#            - name: remove_urls
#              params:
#                field: "Description"
#                pattern: 'https?://\S+|www\.\S+'
#          params:
#            description: "016000. NB +  remove urls only"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#
#        - run_name: "017000. NB + remove whitespace only"
#          text_field: "Description"
#          preprocessing:
#            - name: remove_whitespace
#              params:
#                field: "Description"
#                pattern: '\\s+'
#          params:
#            description: "017000. NB + remove whitespace only"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#
#        - run_name: "018000. NB +  remove punct. noise only"
#          text_field: "Description"
#          preprocessing:
#            - name: remove_punctuation_noise
#              params:
#                field: "Description"
#                pattern: '([!?.,])\\1+'
#          params:
#            description: "018000. NB +  remove punct. noise onlyy"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#
#        - run_name: "019000. NB +  stopword remover only"
#          text_field: "Description"
#          preprocessing:
#            - name: stopword_remover
#              params:
#                field: "Description"
#                language: "english"
#                lower: true
#          params:
#            description: "019000. NB +  stopword remover only"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#
#        - run_name: "020000. NB +  emoji remover ony"
#          text_field: "Description"
#          preprocessing:
#            - name: emoji_remover
#              params:
#                use_emoji_lib: true
#          params:
#            description: "020000. NB +  emoji remover ony"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#        - run_name: "021000. NB +  stemmer (porter) only"
#          text_field: "Description"
#          preprocessing:
#            - name: stemmer
#              params:
#                language: "english"
#                algorithm: "porter"
#          params:
#            description: "021000. NB +  stemmer (porter) only"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#
#        - run_name: "022000. NB +  stemmer (snowball) only"
#          text_field: "Description"
#          preprocessing:
#            - name: stemmer
#              params:
#                language: "english"
#                algorithm: "snowball"
#          params:
#            description: "022000. NB +  stemmer (snowball) only"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
        - run_name: "023000. NB +  lemmatization only"
          text_field: "Description"
          preprocessing:
            - name: lemmatizer
              params:
                model: "en_core_web_sm"
          params:
            description: "023000. NB +  lemmatization only"
            save_path: "output/naive_bayes_results"
            cv_enabled: true
            cv_stratified: true
            cv_folds: 5
            cv_shuffle: true
            cv_random_state: 43
            vectorizer:
              vectorizer_name: "tfidf"
              vectorizer_field: "Description"
              vectorizer_params:
                max_features: 10000
                ngram_range: [ 4, 6 ]
                analyzer: 'char_wb'
            visualisations:
              - name: confusion_matrix
                kwargs:
                  figsize: [ 8, 6 ]
                  cmap: "Blues"
#
#        - run_name: "024000. NB +  sampling (SMOTE) only"
#          text_field: "Description"
#          params:
#            description: "024000. NB +  sampling (SMOTE) only"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            sampler:
#              name: "composite"
#              params:
#                steps:
#                  - name: "smote"
#                    params:
#                      random_state: 42
#                      sampling_strategy: "auto"
#                      k_neighbors: 5
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#
#
#        - run_name: "025000. NB +  sampling (under)"
#          text_field: "Description"
#          params:
#            description: "025000. NB +  sampling (under)"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            sampler:
#              name: "composite"
#              params:
#                steps:
#                  - name: "under_sampler"
#                    params:
#                      random_state: 42
#                      sampling_strategy: "auto"
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
#
#
#        - run_name: "026000. NB +  sampling (over)"
#          text_field: "Description"
#          params:
#            description: "026000. NB +  sampling (over)"
#            save_path: "output/naive_bayes_results"
#            cv_enabled: true
#            cv_stratified: true
#            cv_folds: 5
#            cv_shuffle: true
#            cv_random_state: 43
#            vectorizer:
#              vectorizer_name: "tfidf"
#              vectorizer_field: "Description"
#              vectorizer_params:
#                max_features: 10000
#                ngram_range: [ 4, 6 ]
#                analyzer: 'char_wb'
#            sampler:
#              name: "composite"
#              params:
#                steps:
#                  - name: "over_sampler"
#                    params:
#                      random_state: 42
#                      sampling_strategy: "auto"
#            visualisations:
#              - name: confusion_matrix
#                kwargs:
#                  figsize: [ 8, 6 ]
#                  cmap: "Blues"
